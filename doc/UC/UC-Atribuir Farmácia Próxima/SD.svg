<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="967px" preserveAspectRatio="none" style="width:2464px;height:967px;" version="1.1" viewBox="0 0 2464 967" width="2464px" zoomAndPan="magnify"><defs><filter height="300%" id="f114fa9iexz87z" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="830.7344" style="stroke:#A80036;stroke-width:1.0;" width="10" x="321" y="73.9609"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="326" y="749.9375"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="120.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="654" y="104.3125"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="658.3281" style="stroke:#A80036;stroke-width:1.0;" width="10" x="654" y="255.3672"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="800" y="406.4219"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="938" y="466.7734"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1084" y="552.4766"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2318.5" y="134.6641"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2318.5" y="195.0156"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2318.5" y="285.7188"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2318.5" y="346.0703"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="200.8125" style="stroke:#000000;stroke-width:2.0;" width="990" x="173" y="511.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="326" x2="326" y1="41.6094" y2="922.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="659" x2="659" y1="41.6094" y2="922.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="805" x2="805" y1="41.6094" y2="922.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="943" x2="943" y1="41.6094" y2="922.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1089" x2="1089" y1="41.6094" y2="922.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1212" x2="1212" y1="41.6094" y2="922.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1400" x2="1400" y1="41.6094" y2="922.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1621" x2="1621" y1="41.6094" y2="922.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1839" x2="1839" y1="41.6094" y2="922.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2135" x2="2135" y1="41.6094" y2="922.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2323" x2="2323" y1="41.6094" y2="922.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2403" x2="2403" y1="41.6094" y2="922.6953"/><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="258" x="195" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="244" x="202" y="26.5332">task :AtribuirEncomendaFarmaciaTask</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="258" x="195" y="921.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="244" x="202" y="943.2285">task :AtribuirEncomendaFarmaciaTask</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="156" x="579" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="586" y="26.5332">moradaBD :MoradaBD</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="156" x="579" y="921.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="586" y="943.2285">moradaBD :MoradaBD</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="108" x="749" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="756" y="26.5332">:AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="108" x="749" y="921.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="756" y="943.2285">:AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="140" x="871" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="878" y="26.5332">:app :AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="140" x="871" y="921.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="878" y="943.2285">:app :AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="124" x="1025" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1032" y="26.5332">:GraphAlgorithms</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="124" x="1025" y="921.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1032" y="943.2285">:GraphAlgorithms</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="95" x="1163" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="1170" y="26.5332">grafo :Graph</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="95" x="1163" y="921.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="1170" y="943.2285">grafo :Graph</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="252" x="1272" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="238" x="1279" y="26.5332">moradas :HashMap&lt;Integer, Morada&gt;</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="252" x="1272" y="921.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="238" x="1279" y="943.2285">moradas :HashMap&lt;Integer, Morada&gt;</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="162" x="1538" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="1545" y="26.5332">moradaCliente :Morada</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="162" x="1538" y="921.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="1545" y="943.2285">moradaCliente :Morada</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="247" x="1714" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="233" x="1721" y="26.5332">carrinho :HashMap&lt;Produto,Integer&gt;</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="247" x="1714" y="921.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="233" x="1721" y="943.2285">carrinho :HashMap&lt;Produto,Integer&gt;</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="316" x="1975" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="302" x="1982" y="26.5332">List&lt;Pair&lt;Double, Integer&gt;&gt; distanciaFarmacias</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="316" x="1975" y="921.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="302" x="1982" y="943.2285">List&lt;Pair&lt;Double, Integer&gt;&gt; distanciaFarmacias</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="33" x="2305" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="19" x="2312" y="26.5332">BD</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="33" x="2305" y="921.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="19" x="2312" y="943.2285">BD</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="98" x="2352" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="2359" y="26.5332">CLIENTE_BD</text><rect fill="#FEFECE" filter="url(#f114fa9iexz87z)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="98" x="2352" y="921.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="2359" y="943.2285">CLIENTE_BD</text><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="830.7344" style="stroke:#A80036;stroke-width:1.0;" width="10" x="321" y="73.9609"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="326" y="749.9375"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="120.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="654" y="104.3125"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="658.3281" style="stroke:#A80036;stroke-width:1.0;" width="10" x="654" y="255.3672"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="800" y="406.4219"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="938" y="466.7734"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1084" y="552.4766"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2318.5" y="134.6641"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2318.5" y="195.0156"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2318.5" y="285.7188"/><rect fill="#FFFFFF" filter="url(#f114fa9iexz87z)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2318.5" y="346.0703"/><polygon fill="#A80036" points="309,69.9609,319,73.9609,309,77.9609,313,73.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="0" x2="315" y1="73.9609" y2="73.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="7" y="69.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="291" x="18" y="69.1045">atribuiEncomendaFarmacia(emailCliente, carrinho)</text><polygon fill="#A80036" points="642,100.3125,652,104.3125,642,108.3125,646,104.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="331" x2="648" y1="104.3125" y2="104.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="338" y="99.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="349" y="99.4561">moradas = getMoradasFarmacia()</text><polygon fill="#A80036" points="2306.5,130.6641,2316.5,134.6641,2306.5,138.6641,2310.5,134.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="664" x2="2312.5" y1="134.6641" y2="134.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="671" y="129.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="682" y="129.8076">connection = getConnection()</text><polygon fill="#A80036" points="2306.5,191.0156,2316.5,195.0156,2306.5,199.0156,2310.5,195.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="664" x2="2312.5" y1="195.0156" y2="195.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="671" y="190.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="682" y="190.1592">closeConnection()</text><polygon fill="#A80036" points="642,251.3672,652,255.3672,642,259.3672,646,255.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="331" x2="648" y1="255.3672" y2="255.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="338" y="250.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293" x="349" y="250.5107">moradaCliente = getMoradaUtilizador(emailCliente)</text><polygon fill="#A80036" points="2306.5,281.7188,2316.5,285.7188,2306.5,289.7188,2310.5,285.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="664" x2="2312.5" y1="285.7188" y2="285.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="671" y="280.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="682" y="280.8623">connection = getConnection()</text><polygon fill="#A80036" points="2306.5,342.0703,2316.5,346.0703,2306.5,350.0703,2310.5,346.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="664" x2="2312.5" y1="346.0703" y2="346.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="671" y="341.2139">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="682" y="341.2139">closeConnection()</text><polygon fill="#A80036" points="788,402.4219,798,406.4219,788,410.4219,792,406.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="331" x2="794" y1="406.4219" y2="406.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="338" y="401.5654">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="349" y="401.5654">app = getInstance()</text><polygon fill="#A80036" points="926,462.7734,936,466.7734,926,470.7734,930,466.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="331" x2="932" y1="466.7734" y2="466.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="338" y="461.917">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="349" y="461.917">grafo = getMapaTerrestreDistancias()</text><path d="M173,511.7734 L246,511.7734 L246,519.7734 L236,529.7734 L173,529.7734 L173,511.7734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="200.8125" style="stroke:#000000;stroke-width:2.0;" width="990" x="173" y="511.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="188" y="526.2686">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="214" x="261" y="525.1924">[para todas as moradas das farmacias]</text><polygon fill="#A80036" points="1072,548.4766,1082,552.4766,1072,556.4766,1076,552.4766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="331" x2="1078" y1="552.4766" y2="552.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="338" y="547.6201">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="438" x="356" y="547.6201">distancia = shortestPath(grafo, moradaFarmacia, moradaCliente, shortPath)</text><path d="M183,595.4766 L183,703.4766 L464,703.4766 L464,605.4766 L454,595.4766 L183,595.4766 " fill="#FBFB77" filter="url(#f114fa9iexz87z)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M454,595.4766 L454,605.4766 L464,605.4766 L454,595.4766 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="193" y="613.9717"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="189" y="630.3232">As farmacias e a respetiva distancia são</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="189" y="646.6748">adicionas à estrutura "distanciaFarmacias"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="189" y="663.0264">caso haja algum caminho entre a farmácia e</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="189" y="679.3779">a morada do cliente</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="193" y="695.7295"/><line style="stroke:#A80036;stroke-width:1.0;" x1="336" x2="378" y1="741.9375" y2="741.9375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="378" x2="378" y1="741.9375" y2="754.9375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="337" x2="378" y1="754.9375" y2="754.9375"/><polygon fill="#A80036" points="347,750.9375,337,754.9375,347,758.9375,343,754.9375" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="343" y="737.0811">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="361" y="737.0811">ordenaFarmacias()</text><path d="M173,797.9375 L173,872.9375 L474,872.9375 L474,807.9375 L464,797.9375 L173,797.9375 " fill="#FBFB77" filter="url(#f114fa9iexz87z)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M464,797.9375 L464,807.9375 L474,807.9375 L464,797.9375 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="183" y="816.4326"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="179" y="832.7842">vai buscar a farmácia que está em primeiro lugar</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="179" y="849.1357">(menor distância)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="183" y="865.4873"/><polygon fill="#A80036" points="11,900.6953,1,904.6953,11,908.6953,7,904.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="325" y1="904.6953" y2="904.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="17" y="899.8389">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="35" y="899.8389">farmaciaID</text><!--MD5=[801d8bdc96759416b62196f87901ace0]
@startuml
autonumber

participant "task :AtribuirEncomendaFarmaciaTask" AS TASK
participant "moradaBD :MoradaBD" AS MORADA_BD
participant ":AplicacaoPOT" AS APP_POT
participant ":app :AplicacaoPOT" AS APP
participant ":GraphAlgorithms" AS GRAPH_ALG

participant "grafo :Graph"
participant "moradas :HashMap<Integer, Morada>"
participant "moradaCliente :Morada"
participant "carrinho :HashMap<Produto,Integer>"
participant "List<Pair<Double, Integer>> distanciaFarmacias"

-> TASK : atribuiEncomendaFarmacia(emailCliente, carrinho)
activate TASK

    TASK -> MORADA_BD : moradas = getMoradasFarmacia()
    activate MORADA_BD

        MORADA_BD -> BD : connection = getConnection()
        activate BD
        deactivate BD

        MORADA_BD -> BD : closeConnection()
        activate BD
        deactivate BD

    deactivate MORADA_BD

    TASK -> MORADA_BD : moradaCliente = getMoradaUtilizador(emailCliente)
    activate MORADA_BD

        MORADA_BD -> BD : connection = getConnection()
        activate BD
        deactivate BD

        MORADA_BD -> BD : closeConnection()
        activate BD
        deactivate BD

    deactivate CLIENTE_BD

    TASK -> APP_POT : app = getInstance()
    activate APP_POT
    deactivate APP_POT

    TASK -> APP : grafo = getMapaTerrestreDistancias()
    activate APP
    deactivate APP

    loop para todas as moradas das farmacias

        TASK -> GRAPH_ALG : distancia = shortestPath(grafo, moradaFarmacia, moradaCliente, shortPath)
        activate GRAPH_ALG
        deactivate GRAPH_ALG

        note over TASK

            As farmacias e a respetiva distancia são
            adicionas à estrutura "distanciaFarmacias"
            caso haja algum caminho entre a farmácia e 
            a morada do cliente

        end note

    end loop

    TASK -> TASK : ordenaFarmacias()
    activate TASK
    deactivate TASK

    note over TASK

        vai buscar a farmácia que está em primeiro lugar
        (menor distância)

    end note

<- - TASK: farmaciaID
deactivate TASK
@enduml

PlantUML version 1.2020.23(Sun Dec 13 19:14:58 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>