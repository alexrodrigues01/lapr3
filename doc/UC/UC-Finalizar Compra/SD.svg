<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2200.8px" preserveAspectRatio="none" style="width:2361px;height:2200px;" version="1.1" viewBox="0 0 2361 2200" width="2361.1px" zoomAndPan="magnify"><defs><filter height="300%" id="f6vbvis7vmirl" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.4"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.8" dy="2.8" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="2064.9781" style="stroke:#A80036;stroke-width:0.7;" width="7" x="17.5" y="69.7266"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="547.4273" style="stroke:#A80036;stroke-width:0.7;" width="7" x="319.2" y="85.3727"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21.2461" style="stroke:#A80036;stroke-width:0.7;" width="7" x="319.2" y="654.0461"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="148.2305" style="stroke:#A80036;stroke-width:0.7;" width="7" x="319.2" y="696.5383"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="1262.3898" style="stroke:#A80036;stroke-width:0.7;" width="7" x="319.2" y="866.0148"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="221.3859" style="stroke:#A80036;stroke-width:0.7;" width="7" x="551.6" y="113.6187"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="232.4766" style="stroke:#A80036;stroke-width:0.7;" width="7" x="551.6" y="367.6312"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="105.7383" style="stroke:#A80036;stroke-width:0.7;" width="7" x="551.6" y="717.7844"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="1219.8977" style="stroke:#A80036;stroke-width:0.7;" width="7" x="551.6" y="887.2609"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="278.9992" style="stroke:#A80036;stroke-width:0.7;" width="7" x="555.1" y="998.5992"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="19.6" style="stroke:#A80036;stroke-width:0.7;" width="7" x="555.1" y="1298.8445"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="738.5" y="950.7531"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="738.5" y="1450.3289"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="738.5" y="1726.6977"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="831.6" y="388.8773"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="926.8" y="431.1234"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1044.05" y="473.3695"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1164.45" y="515.6156"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1164.45" y="739.0305"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1164.45" y="1492.575"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1164.45" y="1616.0594"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1280.65" y="1041.0914"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1419.25" y="1344.5906"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1550.85" y="1768.9438"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1550.85" y="1874.682"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1669.85" y="1980.4203"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="536.8617"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="579.1078"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="760.2766"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="802.5227"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1062.3375"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1104.5836"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1365.8367"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1408.0828"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1513.8211"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1556.0672"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1637.3055"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1679.5516"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1790.1898"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1832.4359"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1895.9281"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1938.1742"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="2001.6664"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="2043.9125"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="2069.9" y="908.507"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="2145.85" y="2086.1586"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="260.0992" style="stroke:#000000;stroke-width:1.4;" width="1601.6" x="424.9" y="1012.5992"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="69.1305" style="stroke:#000000;stroke-width:1.4;" width="1492.4" x="460.6" y="1198.668"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="118.5844" style="stroke:#000000;stroke-width:1.4;" width="1565.9" x="460.6" y="1587.5672"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="21" x2="21" y1="62.7266" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="322.35" x2="322.35" y1="62.7266" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="555.1" x2="555.1" y1="114.2859" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="742" x2="742" y1="62.7266" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="835.1" x2="835.1" y1="62.7266" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="930.3" x2="930.3" y1="62.7266" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="1047.2" x2="1047.2" y1="62.7266" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="1167.6" x2="1167.6" y1="146.9125" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="1283.8" x2="1283.8" y1="179.5391" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="1422.4" x2="1422.4" y1="212.1656" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="1554" x2="1554" y1="244.7922" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="1673" x2="1673" y1="277.4188" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="1798.3" x2="1798.3" y1="310.0453" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="1903.3" x2="1903.3" y1="342.6719" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="1985.9" x2="1985.9" y1="62.7266" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="2073.4" x2="2073.4" y1="62.7266" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="2149" x2="2149" y1="62.7266" y2="2141.0047"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:5.0,5.0;" x1="2265.9" x2="2265.9" y1="62.7266" y2="2141.0047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="30.8" x="3.5" y="60.5732">Cliente</text><ellipse cx="21" cy="10.5" fill="#FEFECE" filter="url(#f6vbvis7vmirl)" rx="5.6" ry="5.6" style="stroke:#A80036;stroke-width:1.4;"/><path d="M21,16.1 L21,35 M11.9,21.7 L30.1,21.7 M21,35 L11.9,45.5 M21,35 L30.1,45.5 " fill="none" filter="url(#f6vbvis7vmirl)" style="stroke:#A80036;stroke-width:1.4;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="30.8" x="3.5" y="2150.4779">Cliente</text><ellipse cx="21" cy="2159.6313" fill="#FEFECE" filter="url(#f6vbvis7vmirl)" rx="5.6" ry="5.6" style="stroke:#A80036;stroke-width:1.4;"/><path d="M21,2165.2313 L21,2184.1313 M11.9,2170.8312 L30.1,2170.8312 M21,2184.1313 L11.9,2194.6313 M21,2184.1313 L30.1,2194.6313 " fill="none" filter="url(#f6vbvis7vmirl)" style="stroke:#A80036;stroke-width:1.4;"/><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="93.1" x="274.75" y="37.1"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="83.3" x="279.65" y="52.1732">:FinalizarCompraUI</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="93.1" x="274.75" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="83.3" x="279.65" y="2155.3779">:FinalizarCompraUI</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="172.2" x="467.6" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="162.4" x="472.5" y="2155.3779">controller :FinalizarCompraController</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="91" x="695.1" y="37.1"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="81.2" x="700" y="52.1732">:CarrinhoCompras</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="91" x="695.1" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="81.2" x="700" y="2155.3779">:CarrinhoCompras</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="75.6" x="795.9" y="37.1"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="65.8" x="800.8" y="52.1732">:AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="75.6" x="795.9" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="65.8" x="800.8" y="2155.3779">:AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="95.2" x="881.3" y="37.1"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="85.4" x="886.2" y="52.1732">app :AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="95.2" x="881.3" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="85.4" x="886.2" y="2155.3779">app :AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="119.7" x="986.3" y="37.1"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="109.9" x="991.2" y="52.1732">sessao :SessaoUtilizador</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="119.7" x="986.3" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="109.9" x="991.2" y="2155.3779">sessao :SessaoUtilizador</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="101.5" x="1115.8" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="91.7" x="1120.7" y="2155.3779">clienteBD :ClienteBD</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="111.3" x="1227.1" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="101.5" x="1232" y="2155.3779">produtoBD :ProdutoBD</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="146.3" x="1348.2" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="136.5" x="1353.1" y="2155.3779">encomendaBD :EncomendaBD</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="97.3" x="1504.3" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="87.5" x="1509.2" y="2155.3779">faturaBD :FaturaBD</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="121.1" x="1611.4" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="111.3" x="1616.3" y="2155.3779">farmaciaBD :FarmaciaBD</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="109.2" x="1742.3" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="99.4" x="1747.2" y="2155.3779">moradaBD :MoradaBD</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="81.9" x="1861.3" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="72.1" x="1866.2" y="2155.3779">notaBD :NotaBD</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="63.7" x="1953" y="37.1"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="53.9" x="1957.9" y="52.1732">:BaseDados</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="63.7" x="1953" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="53.9" x="1957.9" y="2155.3779">:BaseDados</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="91" x="2026.5" y="37.1"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="81.2" x="2031.4" y="52.1732">:ValidaParametros</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="91" x="2026.5" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="81.2" x="2031.4" y="2155.3779">:ValidaParametros</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="41.3" x="2127.3" y="37.1"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="31.5" x="2132.2" y="52.1732">:Emails</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="41.3" x="2127.3" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="31.5" x="2132.2" y="2155.3779">:Emails</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="172.9" x="2178.4" y="37.1"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="163.1" x="2183.3" y="52.1732">carrinho :HashMap&lt;Produto,Integer&gt;</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="172.9" x="2178.4" y="2140.3047"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="163.1" x="2183.3" y="2155.3779">carrinho :HashMap&lt;Produto,Integer&gt;</text><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="2064.9781" style="stroke:#A80036;stroke-width:0.7;" width="7" x="17.5" y="69.7266"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="547.4273" style="stroke:#A80036;stroke-width:0.7;" width="7" x="319.2" y="85.3727"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21.2461" style="stroke:#A80036;stroke-width:0.7;" width="7" x="319.2" y="654.0461"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="148.2305" style="stroke:#A80036;stroke-width:0.7;" width="7" x="319.2" y="696.5383"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="1262.3898" style="stroke:#A80036;stroke-width:0.7;" width="7" x="319.2" y="866.0148"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="221.3859" style="stroke:#A80036;stroke-width:0.7;" width="7" x="551.6" y="113.6187"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="232.4766" style="stroke:#A80036;stroke-width:0.7;" width="7" x="551.6" y="367.6312"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="105.7383" style="stroke:#A80036;stroke-width:0.7;" width="7" x="551.6" y="717.7844"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="1219.8977" style="stroke:#A80036;stroke-width:0.7;" width="7" x="551.6" y="887.2609"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="278.9992" style="stroke:#A80036;stroke-width:0.7;" width="7" x="555.1" y="998.5992"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="19.6" style="stroke:#A80036;stroke-width:0.7;" width="7" x="555.1" y="1298.8445"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="738.5" y="950.7531"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="738.5" y="1450.3289"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="738.5" y="1726.6977"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="831.6" y="388.8773"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="926.8" y="431.1234"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1044.05" y="473.3695"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1164.45" y="515.6156"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1164.45" y="739.0305"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1164.45" y="1492.575"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1164.45" y="1616.0594"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1280.65" y="1041.0914"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1419.25" y="1344.5906"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1550.85" y="1768.9438"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1550.85" y="1874.682"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="84.4922" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1669.85" y="1980.4203"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="536.8617"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="579.1078"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="760.2766"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="802.5227"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1062.3375"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1104.5836"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1365.8367"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1408.0828"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1513.8211"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1556.0672"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1637.3055"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1679.5516"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1790.1898"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1832.4359"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1895.9281"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="1938.1742"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="2001.6664"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="1982.75" y="2043.9125"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="2069.9" y="908.507"/><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="21" style="stroke:#A80036;stroke-width:0.7;" width="7" x="2145.85" y="2086.1586"/><polygon fill="#A80036" points="310.8,82.5727,317.8,85.3727,310.8,88.1727,313.6,85.3727" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="24.5" x2="315" y1="85.3727" y2="85.3727"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="4.9" x="29.4" y="81.9731">1</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="191.8" x="37.1" y="81.9731">inicia a finalização e pagamento da encomenda</text><polygon fill="#A80036" points="459.2,103.8188,466.2,106.6187,459.2,109.4187,462,106.6187" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="326.2" x2="463.4" y1="106.6187" y2="106.6187"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="4.9" x="331.1" y="103.2192">2</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="79.1" x="338.8" y="103.2192">controller = create()</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="172.2" x="467.6" y="90.9727"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="162.4" x="472.5" y="106.0459">controller :FinalizarCompraController</text><polygon fill="#A80036" points="1107.4,136.4453,1114.4,139.2453,1107.4,142.0453,1110.2,139.2453" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1111.6" y1="139.2453" y2="139.2453"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="4.9" x="563.5" y="135.8458">3</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="81.2" x="571.2" y="135.8458">clienteBD = create()</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="101.5" x="1115.8" y="123.5992"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="91.7" x="1120.7" y="138.6725">clienteBD :ClienteBD</text><polygon fill="#A80036" points="1218.7,169.0719,1225.7,171.8719,1218.7,174.6719,1221.5,171.8719" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1222.9" y1="171.8719" y2="171.8719"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="4.9" x="563.5" y="168.4724">4</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="84.7" x="571.2" y="168.4724">produtoBD = create()</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="111.3" x="1227.1" y="156.2258"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="101.5" x="1232" y="171.299">produtoBD :ProdutoBD</text><polygon fill="#A80036" points="1339.8,201.6984,1346.8,204.4984,1339.8,207.2984,1342.6,204.4984" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1344" y1="204.4984" y2="204.4984"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="4.9" x="563.5" y="201.0989">5</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="101.5" x="571.2" y="201.0989">encomendaBD = create()</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="146.3" x="1348.2" y="188.8523"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="136.5" x="1353.1" y="203.9256">encomendaBD :EncomendaBD</text><polygon fill="#A80036" points="1495.9,234.325,1502.9,237.125,1495.9,239.925,1498.7,237.125" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1500.1" y1="237.125" y2="237.125"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="4.9" x="563.5" y="233.7255">6</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="77" x="571.2" y="233.7255">faturaBD = create()</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="97.3" x="1504.3" y="221.4789"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="87.5" x="1509.2" y="236.5521">faturaBD :FaturaBD</text><polygon fill="#A80036" points="1603,266.9516,1610,269.7516,1603,272.5516,1605.8,269.7516" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1607.2" y1="269.7516" y2="269.7516"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="4.9" x="563.5" y="266.3521">7</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="88.9" x="571.2" y="266.3521">farmaciaBD = create()</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="121.1" x="1611.4" y="254.1055"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="111.3" x="1616.3" y="269.1787">farmaciaBD :FarmaciaBD</text><polygon fill="#A80036" points="1733.9,299.5781,1740.9,302.3781,1733.9,305.1781,1736.7,302.3781" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1738.1" y1="302.3781" y2="302.3781"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="4.9" x="563.5" y="298.9786">8</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="84.7" x="571.2" y="298.9786">moradaBD = create()</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="109.2" x="1742.3" y="286.732"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="99.4" x="1747.2" y="301.8053">moradaBD :MoradaBD</text><polygon fill="#A80036" points="1852.9,332.2047,1859.9,335.0047,1852.9,337.8047,1855.7,335.0047" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="555.1" x2="1857.1" y1="335.0047" y2="335.0047"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="4.9" x="560" y="331.6052">9</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="72.1" x="567.7" y="331.6052">notaBD = create()</text><rect fill="#FEFECE" filter="url(#f6vbvis7vmirl)" height="22.1266" style="stroke:#A80036;stroke-width:1.0499999999999998;" width="81.9" x="1861.3" y="319.3586"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacingAndGlyphs" textLength="72.1" x="1866.2" y="334.4318">notaBD :NotaBD</text><polygon fill="#A80036" points="543.2,364.8312,550.2,367.6312,543.2,370.4313,546,367.6312" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="326.2" x2="547.4" y1="367.6312" y2="367.6312"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="331.1" y="364.2317">10</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="95.2" x="343.7" y="364.2317">creditos = getCreditos()</text><polygon fill="#A80036" points="823.2,386.0773,830.2,388.8773,823.2,391.6773,826,388.8773" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="827.4" y1="388.8773" y2="388.8773"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="385.4778">11</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="78.4" x="576.1" y="385.4778">app = getInstance()</text><polygon fill="#A80036" points="918.4,428.3234,925.4,431.1234,918.4,433.9234,921.2,431.1234" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="922.6" y1="431.1234" y2="431.1234"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="427.7239">12</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="110.6" x="576.1" y="427.7239">sessao = getSessaoAtual()</text><polygon fill="#A80036" points="1035.65,470.5695,1042.65,473.3695,1035.65,476.1695,1038.45,473.3695" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1039.85" y1="473.3695" y2="473.3695"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="469.97">13</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="140" x="576.1" y="469.97">emailCliente = getEmailUtilizador()</text><polygon fill="#A80036" points="1156.05,512.8156,1163.05,515.6156,1156.05,518.4156,1158.85,515.6156" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1160.25" y1="515.6156" y2="515.6156"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="512.2161">14</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="144.9" x="576.1" y="512.2161">creditos = getCreditos(emailCliente)</text><polygon fill="#A80036" points="1974.35,534.0617,1981.35,536.8617,1974.35,539.6617,1977.15,536.8617" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1171.45" x2="1978.55" y1="536.8617" y2="536.8617"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1176.35" y="533.4622">15</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="119" x="1188.95" y="533.4622">connection = getConnection()</text><polygon fill="#A80036" points="1974.35,576.3078,1981.35,579.1078,1974.35,581.9078,1977.15,579.1078" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1171.45" x2="1978.55" y1="579.1078" y2="579.1078"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1176.35" y="575.7083">16</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="1188.95" y="575.7083">closeConnection()</text><polygon fill="#A80036" points="32.2,630,25.2,632.8,32.2,635.6,29.4,632.8" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:2.0,2.0;" x1="28" x2="322" y1="632.8" y2="632.8"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="36.4" y="623.6774">17</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="175" x="49" y="617.9544">Informa a quantidade de créditos que tem e</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="220.5" x="49" y="629.4005">solicita a quantidade de créditos que deseja descontar</text><polygon fill="#A80036" points="310.8,651.2461,317.8,654.0461,310.8,656.8461,313.6,654.0461" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="24.5" x2="315" y1="654.0461" y2="654.0461"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="29.4" y="650.6466">18</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="134.4" x="42" y="650.6466">Introduz a quantidade de créditos</text><polygon fill="#A80036" points="32.2,672.4922,25.2,675.2922,32.2,678.0922,29.4,675.2922" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:2.0,2.0;" x1="28" x2="322" y1="675.2922" y2="675.2922"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="36.4" y="671.8927">19</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="153.3" x="49" y="671.8927">Solicita para introduzir o cvv do cartão</text><polygon fill="#A80036" points="310.8,693.7383,317.8,696.5383,310.8,699.3383,313.6,696.5383" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="24.5" x2="315" y1="696.5383" y2="696.5383"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="29.4" y="693.1388">20</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="95.2" x="42" y="693.1388">Introduz o cvv do cartão</text><polygon fill="#A80036" points="543.2,714.9844,550.2,717.7844,543.2,720.5844,546,717.7844" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="326.2" x2="547.4" y1="717.7844" y2="717.7844"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="331.1" y="714.3849">21</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="343.7" y="714.3849">validaCVV(cvv)</text><polygon fill="#A80036" points="1156.05,736.2305,1163.05,739.0305,1156.05,741.8305,1158.85,739.0305" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1160.25" y1="739.0305" y2="739.0305"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="735.631">22</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="119" x="576.1" y="735.631">verificaCVV(emailCliente, cvv)</text><polygon fill="#A80036" points="1974.35,757.4766,1981.35,760.2766,1974.35,763.0766,1977.15,760.2766" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1171.45" x2="1978.55" y1="760.2766" y2="760.2766"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1176.35" y="756.8771">23</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="119" x="1188.95" y="756.8771">connection = getConnection()</text><polygon fill="#A80036" points="1974.35,799.7227,1981.35,802.5227,1974.35,805.3227,1977.15,802.5227" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1171.45" x2="1978.55" y1="802.5227" y2="802.5227"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1176.35" y="799.1231">24</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="1188.95" y="799.1231">closeConnection()</text><polygon fill="#A80036" points="32.2,841.9688,25.2,844.7688,32.2,847.5687,29.4,844.7688" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:2.0,2.0;" x1="28" x2="322" y1="844.7688" y2="844.7688"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="36.4" y="841.3692">25</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="166.6" x="49" y="841.3692">Solicita o nif que deseja colocar na fatura</text><polygon fill="#A80036" points="310.8,863.2148,317.8,866.0148,310.8,868.8148,313.6,866.0148" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="24.5" x2="315" y1="866.0148" y2="866.0148"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="29.4" y="862.6153">26</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="51.8" x="42" y="862.6153">Introduz o nif</text><polygon fill="#A80036" points="543.2,884.4609,550.2,887.2609,543.2,890.0609,546,887.2609" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="326.2" x2="547.4" y1="887.2609" y2="887.2609"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="331.1" y="883.8614">27</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="199.5" x="343.7" y="883.8614">finalizarCompra(numeroCreditosDescontados, nif)</text><polygon fill="#A80036" points="2061.5,905.707,2068.5,908.507,2061.5,911.307,2064.3,908.507" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="2065.7" y1="908.507" y2="908.507"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="905.1075">28</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="93.1" x="576.1" y="905.1075">validaParametroNIF(nif)</text><polygon fill="#A80036" points="730.1,947.9531,737.1,950.7531,730.1,953.5531,732.9,950.7531" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="734.3" y1="950.7531" y2="950.7531"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="947.3536">29</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="95.2" x="576.1" y="947.3536">carrinho = getCarrinho()</text><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="591.5" y1="989.4992" y2="989.4992"/><line style="stroke:#A80036;stroke-width:0.7;" x1="591.5" x2="591.5" y1="989.4992" y2="998.5992"/><line style="stroke:#A80036;stroke-width:0.7;" x1="562.8" x2="591.5" y1="998.5992" y2="998.5992"/><polygon fill="#A80036" points="569.8,995.7992,562.8,998.5992,569.8,1001.3992,567,998.5992" style="stroke:#A80036;stroke-width:0.7;"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="567" y="986.0997">30</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="84" x="579.6" y="986.0997">validaStock(carrinho)</text><path d="M424.9,1012.5992 L476,1012.5992 L476,1018.1992 L469,1025.1992 L424.9,1025.1992 L424.9,1012.5992 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.7;"/><rect fill="none" height="260.0992" style="stroke:#000000;stroke-width:1.4;" width="1601.6" x="424.9" y="1012.5992"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19.6" x="435.4" y="1022.7458">loop</text><text fill="#000000" font-family="sans-serif" font-size="7.7" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="121.1" x="486.5" y="1021.9925">[Para cada produto do carrinho]</text><polygon fill="#A80036" points="1272.25,1038.2914,1279.25,1041.0914,1272.25,1043.8914,1275.05,1041.0914" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="562.1" x2="1276.45" y1="1041.0914" y2="1041.0914"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="567" y="1037.6919">31</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="162.4" x="579.6" y="1037.6919">stock = getStock(produtoID, farmaciaID)</text><polygon fill="#A80036" points="1974.35,1059.5375,1981.35,1062.3375,1974.35,1065.1375,1977.15,1062.3375" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1287.65" x2="1978.55" y1="1062.3375" y2="1062.3375"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1292.55" y="1058.938">32</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="119" x="1305.15" y="1058.938">connection = getConnection()</text><polygon fill="#A80036" points="1974.35,1101.7836,1981.35,1104.5836,1974.35,1107.3836,1977.15,1104.5836" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1287.65" x2="1978.55" y1="1104.5836" y2="1104.5836"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1292.55" y="1101.1841">33</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="1305.15" y="1101.1841">closeConnection()</text><path d="M431.9,1134.6836 L431.9,1187.1836 L674.8,1187.1836 L674.8,1141.6836 L667.8,1134.6836 L431.9,1134.6836 " fill="#FBFB77" filter="url(#f6vbvis7vmirl)" style="stroke:#A80036;stroke-width:0.7;"/><path d="M667.8,1134.6836 L667.8,1141.6836 L674.8,1141.6836 L667.8,1134.6836 " fill="#FBFB77" style="stroke:#A80036;stroke-width:0.7;"/><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="0" x="438.9" y="1147.6302"/><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="221.9" x="436.1" y="1159.0763">Calcula a quantidade necessaria pedir a outra farmacia</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="228.2" x="436.1" y="1170.5224">quantidadeNecessariaPedir = quantidadeProduto - stock</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="0" x="438.9" y="1181.9685"/><path d="M460.6,1198.668 L506.1,1198.668 L506.1,1204.268 L499.1,1211.268 L460.6,1211.268 L460.6,1198.668 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.7;"/><rect fill="none" height="69.1305" style="stroke:#000000;stroke-width:1.4;" width="1492.4" x="460.6" y="1198.668"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="471.1" y="1208.8146">opt</text><text fill="#000000" font-family="sans-serif" font-size="7.7" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128.1" x="516.6" y="1208.0612">[: quantidadeNecessariaPedir &gt; 0]</text><rect fill="#FFFFFF" filter="url(#f6vbvis7vmirl)" height="52.7844" style="stroke:#000000;stroke-width:1.4;" width="1479.8" x="465.5" y="1211.5141"/><polygon fill="#EEEEEE" points="465.5,1211.5141,508.9,1211.5141,508.9,1217.1141,501.9,1224.1141,465.5,1224.1141,465.5,1211.5141" style="stroke:#000000;stroke-width:1.4;"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="11.9" x="474.6" y="1222.3606">ref</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="0" x="1172.85" y="1236.3606"/><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="73.5" x="1170.05" y="1247.8067">UC - PedirProduto</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="0" x="1172.85" y="1259.2528"/><line style="stroke:#A80036;stroke-width:0.7;" x1="562.1" x2="591.5" y1="1293.2445" y2="1293.2445"/><line style="stroke:#A80036;stroke-width:0.7;" x1="591.5" x2="591.5" y1="1293.2445" y2="1302.3445"/><line style="stroke:#A80036;stroke-width:0.7;" x1="562.8" x2="591.5" y1="1302.3445" y2="1302.3445"/><polygon fill="#A80036" points="569.8,1299.5445,562.8,1302.3445,569.8,1305.1445,567,1302.3445" style="stroke:#A80036;stroke-width:0.7;"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="567" y="1289.845">34</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="157.5" x="579.6" y="1289.845">carga = calcularPesoCarrinho(carrinho)</text><polygon fill="#A80036" points="1410.85,1341.7906,1417.85,1344.5906,1410.85,1347.3906,1413.65,1344.5906" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1415.05" y1="1344.5906" y2="1344.5906"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="1341.1911">35</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="302.4" x="576.1" y="1341.1911">encomendaID = novaEncomenda(farmaciaID, carga, carrinho, emailCliente)</text><polygon fill="#A80036" points="1974.35,1363.0367,1981.35,1365.8367,1974.35,1368.6367,1977.15,1365.8367" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1426.25" x2="1978.55" y1="1365.8367" y2="1365.8367"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1431.15" y="1362.4372">36</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="119" x="1443.75" y="1362.4372">connection = getConnection()</text><polygon fill="#A80036" points="1974.35,1405.2828,1981.35,1408.0828,1974.35,1410.8828,1977.15,1408.0828" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1426.25" x2="1978.55" y1="1408.0828" y2="1408.0828"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1431.15" y="1404.6833">37</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="1443.75" y="1404.6833">closeConnection()</text><polygon fill="#A80036" points="730.1,1447.5289,737.1,1450.3289,730.1,1453.1289,732.9,1450.3289" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="734.3" y1="1450.3289" y2="1450.3289"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="1446.9294">38</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="114.8" x="576.1" y="1446.9294">precoTotal = getPrecoTotal()</text><polygon fill="#A80036" points="1156.05,1489.775,1163.05,1492.575,1156.05,1495.375,1158.85,1492.575" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1160.25" y1="1492.575" y2="1492.575"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="1489.1755">39</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="184.8" x="576.1" y="1489.1755">adicionaCreditos(emailCliente, novosCreditos)</text><polygon fill="#A80036" points="1974.35,1511.0211,1981.35,1513.8211,1974.35,1516.6211,1977.15,1513.8211" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1171.45" x2="1978.55" y1="1513.8211" y2="1513.8211"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1176.35" y="1510.4216">40</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="119" x="1188.95" y="1510.4216">connection = getConnection()</text><polygon fill="#A80036" points="1974.35,1553.2672,1981.35,1556.0672,1974.35,1558.8672,1977.15,1556.0672" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1171.45" x2="1978.55" y1="1556.0672" y2="1556.0672"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1176.35" y="1552.6677">41</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="1188.95" y="1552.6677">closeConnection()</text><path d="M460.6,1587.5672 L506.1,1587.5672 L506.1,1593.1672 L499.1,1600.1672 L460.6,1600.1672 L460.6,1587.5672 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.7;"/><rect fill="none" height="118.5844" style="stroke:#000000;stroke-width:1.4;" width="1565.9" x="460.6" y="1587.5672"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="471.1" y="1597.7138">opt</text><text fill="#000000" font-family="sans-serif" font-size="7.7" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="135.1" x="516.6" y="1596.9604">[numeroCreditosDescontados != 0]</text><polygon fill="#A80036" points="1156.05,1613.2594,1163.05,1616.0594,1156.05,1618.8594,1158.85,1616.0594" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1160.25" y1="1616.0594" y2="1616.0594"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="1612.6599">42</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="248.5" x="576.1" y="1612.6599">descontaCreditos(emailCliente, numeroCreditosDescontados)</text><polygon fill="#A80036" points="1974.35,1634.5055,1981.35,1637.3055,1974.35,1640.1055,1977.15,1637.3055" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1171.45" x2="1978.55" y1="1637.3055" y2="1637.3055"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1176.35" y="1633.906">43</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="119" x="1188.95" y="1633.906">connection = getConnection()</text><polygon fill="#A80036" points="1974.35,1676.7516,1981.35,1679.5516,1974.35,1682.3516,1977.15,1679.5516" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1171.45" x2="1978.55" y1="1679.5516" y2="1679.5516"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1176.35" y="1676.1521">44</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="1188.95" y="1676.1521">closeConnection()</text><polygon fill="#A80036" points="730.1,1723.8977,737.1,1726.6977,730.1,1729.4977,732.9,1726.6977" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="734.3" y1="1726.6977" y2="1726.6977"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="1723.2981">45</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="63.7" x="576.1" y="1723.2981">limparCarrinho()</text><polygon fill="#A80036" points="1542.45,1766.1438,1549.45,1768.9438,1542.45,1771.7437,1545.25,1768.9438" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1546.65" y1="1768.9438" y2="1768.9438"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="1765.5442">46</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="408.8" x="576.1" y="1765.5442">faturaID = novaFatura(encomendaID, numeroCreditosDescontados, TAXA_ENTREGA, nif, farmaciaID)</text><polygon fill="#A80036" points="1974.35,1787.3898,1981.35,1790.1898,1974.35,1792.9898,1977.15,1790.1898" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1557.85" x2="1978.55" y1="1790.1898" y2="1790.1898"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1562.75" y="1786.7903">47</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="119" x="1575.35" y="1786.7903">connection = getConnection()</text><polygon fill="#A80036" points="1974.35,1829.6359,1981.35,1832.4359,1974.35,1835.2359,1977.15,1832.4359" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1557.85" x2="1978.55" y1="1832.4359" y2="1832.4359"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1562.75" y="1829.0364">48</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="1575.35" y="1829.0364">closeConnection()</text><polygon fill="#A80036" points="1542.45,1871.882,1549.45,1874.682,1542.45,1877.482,1545.25,1874.682" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1546.65" y1="1874.682" y2="1874.682"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="1871.2825">49</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="108.5" x="576.1" y="1871.2825">fatura = getFatura(faturaID)</text><polygon fill="#A80036" points="1974.35,1893.1281,1981.35,1895.9281,1974.35,1898.7281,1977.15,1895.9281" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1557.85" x2="1978.55" y1="1895.9281" y2="1895.9281"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1562.75" y="1892.5286">50</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="119" x="1575.35" y="1892.5286">connection = getConnection()</text><polygon fill="#A80036" points="1974.35,1935.3742,1981.35,1938.1742,1974.35,1940.9742,1977.15,1938.1742" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1557.85" x2="1978.55" y1="1938.1742" y2="1938.1742"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1562.75" y="1934.7747">51</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="1575.35" y="1934.7747">closeConnection()</text><polygon fill="#A80036" points="1661.45,1977.6203,1668.45,1980.4203,1661.45,1983.2203,1664.25,1980.4203" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="1665.65" y1="1980.4203" y2="1980.4203"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="1977.0208">52</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="193.9" x="576.1" y="1977.0208">nomeFarmacia = getNomeFarmacia(farmaciaID)</text><polygon fill="#A80036" points="1974.35,1998.8664,1981.35,2001.6664,1974.35,2004.4664,1977.15,2001.6664" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1676.85" x2="1978.55" y1="2001.6664" y2="2001.6664"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1681.75" y="1998.2669">53</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="119" x="1694.35" y="1998.2669">connection = getConnection()</text><polygon fill="#A80036" points="1974.35,2041.1125,1981.35,2043.9125,1974.35,2046.7125,1977.15,2043.9125" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="1676.85" x2="1978.55" y1="2043.9125" y2="2043.9125"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="1681.75" y="2040.513">54</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="1694.35" y="2040.513">closeConnection()</text><polygon fill="#A80036" points="2137.45,2083.3586,2144.45,2086.1586,2137.45,2088.9586,2140.25,2086.1586" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;" x1="558.6" x2="2141.65" y1="2086.1586" y2="2086.1586"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="563.5" y="2082.7591">55</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="230.3" x="576.1" y="2082.7591">sendEmail(nomeFarmacia ,emailCliente, "Fatura", fatura)</text><polygon fill="#A80036" points="32.2,2125.6047,25.2,2128.4047,32.2,2131.2047,29.4,2128.4047" style="stroke:#A80036;stroke-width:0.7;"/><line style="stroke:#A80036;stroke-width:0.7;stroke-dasharray:2.0,2.0;" x1="28" x2="322" y1="2128.4047" y2="2128.4047"/><text fill="#000000" font-family="sans-serif" font-size="9.1" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9.8" x="36.4" y="2125.0052">56</text><text fill="#000000" font-family="sans-serif" font-size="9.1" lengthAdjust="spacingAndGlyphs" textLength="265.3" x="49" y="2125.0052">Informa do sucesso da operação e do envio da fatura para o email</text><!--MD5=[6678de4517e753ca9e6bfccaec501df0]
@startuml
autonumber

actor "Cliente" AS CLIENTE
participant ":FinalizarCompraUI" AS UI
participant "controller :FinalizarCompraController" AS CONTROLLER
participant ":CarrinhoCompras" AS CARRINHO
participant ":AplicacaoPOT" AS POT
participant "app :AplicacaoPOT" AS APP
participant "sessao :SessaoUtilizador" AS SESSAO
participant "clienteBD :ClienteBD" AS CLI_BD
participant "produtoBD :ProdutoBD" AS PRODUTO_BD
participant "encomendaBD :EncomendaBD" AS ENCOMENDA_BD
participant "faturaBD :FaturaBD" AS FATURA_BD
participant "farmaciaBD :FarmaciaBD" AS FARMACIA_BD
participant "moradaBD :MoradaBD" AS MORADA_BD
participant "notaBD :NotaBD" AS NOTA_BD
participant ":BaseDados" AS BD
participant ":ValidaParametros" AS VALIDA_PARAMETROS
participant ":Emails" AS EMAIL
participant "carrinho :HashMap<Produto,Integer>"

activate CLIENTE
CLIENTE -> UI : inicia a finalização e pagamento da encomenda
activate UI

    UI -> CONTROLLER** : controller = create()
    activate CONTROLLER

        CONTROLLER -> CLI_BD** : clienteBD = create()
        CONTROLLER -> PRODUTO_BD** : produtoBD = create()
        CONTROLLER -> ENCOMENDA_BD** : encomendaBD = create()
        CONTROLLER -> FATURA_BD** : faturaBD = create()
        CONTROLLER -> FARMACIA_BD** : farmaciaBD = create()
        CONTROLLER -> MORADA_BD** : moradaBD = create()
        CONTROLLER -> NOTA_BD** : notaBD = create()

    deactivate CONTROLLER

    UI -> CONTROLLER : creditos = getCreditos()
    activate CONTROLLER

        CONTROLLER -> POT : app = getInstance()
        activate POT
        deactivate POT

        CONTROLLER -> APP : sessao = getSessaoAtual()
        activate APP
        deactivate APP

        CONTROLLER -> SESSAO : emailCliente = getEmailUtilizador()
        activate SESSAO
        deactivate SESSAO

        CONTROLLER -> CLI_BD : creditos = getCreditos(emailCliente)
        activate CLI_BD

            CLI_BD -> BD : connection = getConnection()
            activate BD
            deactivate BD

            CLI_BD -> BD : closeConnection()
            activate BD
            deactivate BD

        deactivate CLI_BD

    deactivate CONTROLLER

UI - -> CLIENTE : Informa a quantidade de créditos que tem e \nsolicita a quantidade de créditos que deseja descontar
deactivate UI

CLIENTE -> UI : Introduz a quantidade de créditos
activate UI

UI - -> CLIENTE : Solicita para introduzir o cvv do cartão
deactivate UI

CLIENTE -> UI : Introduz o cvv do cartão
activate UI

    UI -> CONTROLLER : validaCVV(cvv)
    activate CONTROLLER

        CONTROLLER -> CLI_BD : verificaCVV(emailCliente, cvv)
        activate CLI_BD

            CLI_BD -> BD : connection = getConnection()
            activate BD
            deactivate BD

            CLI_BD -> BD : closeConnection()
            activate BD
            deactivate BD

        deactivate CLI_BD

    deactivate CONTROLLER

UI - -> CLIENTE : Solicita o nif que deseja colocar na fatura
deactivate UI

CLIENTE -> UI : Introduz o nif
activate UI

    UI -> CONTROLLER : finalizarCompra(numeroCreditosDescontados, nif)
    activate CONTROLLER

        CONTROLLER -> VALIDA_PARAMETROS : validaParametroNIF(nif)
        activate VALIDA_PARAMETROS
        deactivate VALIDA_PARAMETROS

        CONTROLLER -> CARRINHO : carrinho = getCarrinho()
        activate CARRINHO
        deactivate CARRINHO

        CONTROLLER -> CONTROLLER : validaStock(carrinho)
        activate CONTROLLER

            loop Para cada produto do carrinho

                CONTROLLER -> PRODUTO_BD : stock = getStock(produtoID, farmaciaID)
                activate PRODUTO_BD

                    PRODUTO_BD -> BD : connection = getConnection()
                    activate BD
                    deactivate BD

                    PRODUTO_BD -> BD : closeConnection()
                    activate BD
                    deactivate BD

                deactivate PRODUTO_BD

                note over CONTROLLER

                    Calcula a quantidade necessaria pedir a outra farmacia
                    quantidadeNecessariaPedir = quantidadeProduto - stock

                end note

                opt : quantidadeNecessariaPedir > 0

                    ref over CONTROLLER, POT, APP, NOTA_BD, MORADA_BD, PRODUTO_BD

                        UC - PedirProduto

                    end ref

                end opt

            end loop

        deactivate CONTROLLER

        CONTROLLER -> CONTROLLER : carga = calcularPesoCarrinho(carrinho)
        activate CONTROLLER
        deactivate CONTROLLER

        CONTROLLER -> ENCOMENDA_BD : encomendaID = novaEncomenda(farmaciaID, carga, carrinho, emailCliente)
        activate ENCOMENDA_BD

            ENCOMENDA_BD -> BD : connection = getConnection()
            activate BD
            deactivate BD

            ENCOMENDA_BD -> BD : closeConnection()
            activate BD
            deactivate BD

        deactivate ENCOMENDA_BD

        CONTROLLER -> CARRINHO : precoTotal = getPrecoTotal()
        activate CARRINHO
        deactivate CARRINHO

        CONTROLLER -> CLI_BD : adicionaCreditos(emailCliente, novosCreditos)
        activate CLI_BD

            CLI_BD -> BD : connection = getConnection()
            activate BD
            deactivate BD

            CLI_BD -> BD : closeConnection()
            activate BD
            deactivate BD

        deactivate CLI_BD

        opt numeroCreditosDescontados != 0
        CONTROLLER -> CLI_BD : descontaCreditos(emailCliente, numeroCreditosDescontados)
        activate CLI_BD

            CLI_BD -> BD : connection = getConnection()
            activate BD
            deactivate BD

            CLI_BD -> BD : closeConnection()
            activate BD
            deactivate BD

        deactivate CLI_BD
        end opt

        CONTROLLER -> CARRINHO : limparCarrinho()
        activate CARRINHO
        deactivate CARRINHO

        CONTROLLER -> FATURA_BD : faturaID = novaFatura(encomendaID, numeroCreditosDescontados, TAXA_ENTREGA, nif, farmaciaID)
        activate FATURA_BD

            FATURA_BD -> BD : connection = getConnection()
            activate BD
            deactivate BD

            FATURA_BD -> BD : closeConnection()
            activate BD
            deactivate BD

        deactivate FATURA_BD

        CONTROLLER -> FATURA_BD : fatura = getFatura(faturaID)
        activate FATURA_BD

            FATURA_BD -> BD : connection = getConnection()
            activate BD
            deactivate BD

            FATURA_BD -> BD : closeConnection()
            activate BD
            deactivate BD

        deactivate FATURA_BD

        CONTROLLER -> FARMACIA_BD : nomeFarmacia = getNomeFarmacia(farmaciaID)
        activate FARMACIA_BD

            FARMACIA_BD -> BD : connection = getConnection()
            activate BD
            deactivate BD

            FARMACIA_BD -> BD : closeConnection()
            activate BD
            deactivate BD

        deactivate FARMACIA_BD

        CONTROLLER -> EMAIL : sendEmail(nomeFarmacia ,emailCliente, "Fatura", fatura)
        activate EMAIL
        deactivate EMAIL

    deactivate CONTROLLER
UI - -> CLIENTE : Informa do sucesso da operação e do envio da fatura para o email
deactivate UI

@enduml

PlantUML version 1.2020.23(Sun Dec 13 19:14:58 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>