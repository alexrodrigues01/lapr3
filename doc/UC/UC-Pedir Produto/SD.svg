<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="934px" preserveAspectRatio="none" style="width:2333px;height:934px;" version="1.1" viewBox="0 0 2333 934" width="2333px" zoomAndPan="magnify"><defs><filter height="300%" id="fi2hethgqrq2w" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="798.3281" style="stroke:#A80036;stroke-width:1.0;" width="10" x="426" y="73.9609"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="662" y="104.3125"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="808" y="164.6641"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="944" y="225.0156"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1088" y="487.125"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1088" y="547.4766"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="120.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1234" y="310.7188"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="120.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1376.5" y="751.5859"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2161.5" y="341.0703"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2161.5" y="401.4219"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2161.5" y="781.9375"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2161.5" y="842.2891"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="379.1641" style="stroke:#000000;stroke-width:2.0;" width="1927" x="297" y="270.0156"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="195.7578" style="stroke:#000000;stroke-width:2.0;" width="860" x="307" y="446.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="431" x2="431" y1="41.6094" y2="890.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="667" x2="667" y1="41.6094" y2="890.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="813" x2="813" y1="41.6094" y2="890.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="949" x2="949" y1="41.6094" y2="890.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1093" x2="1093" y1="41.6094" y2="890.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1239" x2="1239" y1="41.6094" y2="890.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1381" x2="1381" y1="41.6094" y2="890.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1514" x2="1514" y1="41.6094" y2="890.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1715" x2="1715" y1="41.6094" y2="890.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1981" x2="1981" y1="41.6094" y2="890.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2166" x2="2166" y1="41.6094" y2="890.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2273" x2="2273" y1="41.6094" y2="890.2891"/><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="132" x="363" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="370" y="26.5332">:PedirProdutoTask</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="132" x="363" y="889.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="370" y="910.8223">:PedirProdutoTask</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="156" x="587" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="594" y="26.5332">moradaBD :MoradaBD</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="156" x="587" y="889.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="594" y="910.8223">moradaBD :MoradaBD</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="108" x="757" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="764" y="26.5332">:AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="108" x="757" y="889.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="764" y="910.8223">:AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="136" x="879" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="886" y="26.5332">app :AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="136" x="879" y="889.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="886" y="910.8223">app :AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="124" x="1029" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1036" y="26.5332">:GraphAlgorithms</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="124" x="1029" y="889.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1036" y="910.8223">:GraphAlgorithms</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="140" x="1167" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="1174" y="26.5332">produto :ProdutoBD</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="140" x="1167" y="889.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="1174" y="910.8223">produto :ProdutoBD</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="117" x="1321" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="1328" y="26.5332">notaBD :NotaBD</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="117" x="1321" y="889.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="1328" y="910.8223">notaBD :NotaBD</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="121" x="1452" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1459" y="26.5332">produto :Produto</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="121" x="1452" y="889.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1459" y="910.8223">produto :Produto</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="252" x="1587" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="238" x="1594" y="26.5332">moradas :HashMap&lt;Integer, Morada&gt;</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="252" x="1587" y="889.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="238" x="1594" y="910.8223">moradas :HashMap&lt;Integer, Morada&gt;</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="252" x="1853" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="238" x="1860" y="26.5332">farmacias :ArrayList&lt;Double, integer&gt;</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="252" x="1853" y="889.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="238" x="1860" y="910.8223">farmacias :ArrayList&lt;Double, integer&gt;</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="91" x="2119" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="2126" y="26.5332">:BaseDados</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="91" x="2119" y="889.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="2126" y="910.8223">:BaseDados</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="95" x="2224" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="2231" y="26.5332">grafo :Graph</text><rect fill="#FEFECE" filter="url(#fi2hethgqrq2w)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="95" x="2224" y="889.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="2231" y="910.8223">grafo :Graph</text><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="798.3281" style="stroke:#A80036;stroke-width:1.0;" width="10" x="426" y="73.9609"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="662" y="104.3125"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="808" y="164.6641"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="944" y="225.0156"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1088" y="487.125"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1088" y="547.4766"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="120.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1234" y="310.7188"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="120.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1376.5" y="751.5859"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2161.5" y="341.0703"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2161.5" y="401.4219"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2161.5" y="781.9375"/><rect fill="#FFFFFF" filter="url(#fi2hethgqrq2w)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2161.5" y="842.2891"/><polygon fill="#A80036" points="414,69.9609,424,73.9609,414,77.9609,418,73.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="0" x2="420" y1="73.9609" y2="73.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="7" y="69.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="396" x="18" y="69.1045">pedirProduto(idFarmaciaRecetora, produtoID, quantidadeNecessaria)</text><polygon fill="#A80036" points="650,100.3125,660,104.3125,650,108.3125,654,104.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="436" x2="656" y1="104.3125" y2="104.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="443" y="99.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="454" y="99.4561">moradas = getMoradasFarmacia()</text><polygon fill="#A80036" points="796,160.6641,806,164.6641,796,168.6641,800,164.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="436" x2="802" y1="164.6641" y2="164.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="443" y="159.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="454" y="159.8076">app = getInstance()</text><polygon fill="#A80036" points="932,221.0156,942,225.0156,932,229.0156,936,225.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="436" x2="938" y1="225.0156" y2="225.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="443" y="220.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="454" y="220.1592">grafo = getMapaTerrestreDistancias()</text><path d="M297,270.0156 L370,270.0156 L370,278.0156 L360,288.0156 L297,288.0156 L297,270.0156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="379.1641" style="stroke:#000000;stroke-width:2.0;" width="1927" x="297" y="270.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="312" y="284.5107">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="214" x="385" y="283.4346">[para todas as moradas das farmácias]</text><polygon fill="#A80036" points="1222,306.7188,1232,310.7188,1222,314.7188,1226,310.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="436" x2="1228" y1="310.7188" y2="310.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="443" y="305.8623">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="399" x="454" y="305.8623">verificaStock(idFarmaciaEmissora, idProduto, quantidadeNecessaria)</text><polygon fill="#A80036" points="2149.5,337.0703,2159.5,341.0703,2149.5,345.0703,2153.5,341.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1244" x2="2155.5" y1="341.0703" y2="341.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1251" y="336.2139">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="1262" y="336.2139">connection = getConnection()</text><polygon fill="#A80036" points="2149.5,397.4219,2159.5,401.4219,2149.5,405.4219,2153.5,401.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1244" x2="2155.5" y1="401.4219" y2="401.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1251" y="396.5654">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="1262" y="396.5654">closeConnection()</text><path d="M307,446.4219 L372,446.4219 L372,454.4219 L362,464.4219 L307,464.4219 L307,446.4219 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="195.7578" style="stroke:#000000;stroke-width:2.0;" width="860" x="307" y="446.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20" x="322" y="460.917">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="387" y="459.8408">[verificaStock == true]</text><polygon fill="#A80036" points="1076,483.125,1086,487.125,1076,491.125,1080,487.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="436" x2="1082" y1="487.125" y2="487.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="443" y="482.2686">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="559" x="454" y="482.2686">distancia = shortestPath(grafo, moradaFarmaciaRecetora, moradaFarmaciaEmissora, shortPath)</text><polygon fill="#A80036" points="1076,543.4766,1086,547.4766,1076,551.4766,1080,547.4766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="436" x2="1082" y1="547.4766" y2="547.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="443" y="542.6201">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="567" x="454" y="542.6201">distancia += shortestPath(grafo, moradaFarmaciaEmissora, moradaFarmaciaRecetora, shortPath)</text><path d="M317,590.4766 L317,632.4766 L540,632.4766 L540,600.4766 L530,590.4766 L317,590.4766 " fill="#FBFB77" filter="url(#fi2hethgqrq2w)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M530,590.4766 L530,600.4766 L540,600.4766 L530,590.4766 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="323" y="608.9717">Todas as farmácias à estrutura</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="323" y="625.3232">"farmacias" (distancia, idFarmacia)</text><path d="M291,661.1797 L291,720.1797 L567,720.1797 L567,671.1797 L557,661.1797 L291,661.1797 " fill="#FBFB77" filter="url(#fi2hethgqrq2w)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M557,661.1797 L557,671.1797 L567,671.1797 L557,661.1797 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="297" y="679.6748">Vai ordenar a farmácia pelo menor consumo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="297" y="696.0264">e retirao id da farmacia que estiver em</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="297" y="712.3779">primeiro lugar (menor distância)</text><polygon fill="#A80036" points="1364.5,747.5859,1374.5,751.5859,1364.5,755.5859,1368.5,751.5859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="436" x2="1370.5" y1="751.5859" y2="751.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="443" y="746.7295">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="513" x="461" y="746.7295">gerarNotas(idFarmaciaRecetora, idFarmaciaEmissora, idProduto, quantidadeNecessaria)</text><polygon fill="#A80036" points="2149.5,777.9375,2159.5,781.9375,2149.5,785.9375,2153.5,781.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1386.5" x2="2155.5" y1="781.9375" y2="781.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1393.5" y="777.0811">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="1411.5" y="777.0811">connection = getConnection()</text><polygon fill="#A80036" points="2149.5,838.2891,2159.5,842.2891,2149.5,846.2891,2153.5,842.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1386.5" x2="2155.5" y1="842.2891" y2="842.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1393.5" y="837.4326">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="1411.5" y="837.4326">closeConnection()</text><!--MD5=[008c734f3850cf9515f723dc47f84a74]
@startuml
autonumber

participant ":PedirProdutoTask" AS TASK
participant "moradaBD :MoradaBD" AS MORADA_BD
participant ":AplicacaoPOT" AS APP_POT
participant "app :AplicacaoPOT" AS APP
participant ":GraphAlgorithms" AS GRAFO
participant "produto :ProdutoBD" AS PRODUTO_BD
participant "notaBD :NotaBD" AS NOTA
participant "produto :Produto" AS PRODUTO
participant "moradas :HashMap<Integer, Morada>"
participant "farmacias :ArrayList<Double, integer>"
participant ":BaseDados" AS BD
participant "grafo :Graph"

-> TASK : pedirProduto(idFarmaciaRecetora, produtoID, quantidadeNecessaria)
activate TASK

    TASK -> MORADA_BD : moradas = getMoradasFarmacia()
    activate MORADA_BD
    deactivate MORADA_BD

    TASK -> APP_POT : app = getInstance()
    activate APP_POT
    deactivate APP_POT

    TASK -> APP : grafo = getMapaTerrestreDistancias()
    activate APP
    deactivate APP

    loop para todas as moradas das farmácias

        TASK -> PRODUTO_BD : verificaStock(idFarmaciaEmissora, idProduto, quantidadeNecessaria)
        activate PRODUTO_BD

            PRODUTO_BD -> BD : connection = getConnection()
            activate BD
            deactivate BD

            PRODUTO_BD -> BD : closeConnection()
            activate BD
            deactivate BD

        deactivate PRODUTO_BD

        opt verificaStock == true

            TASK -> GRAFO : distancia = shortestPath(grafo, moradaFarmaciaRecetora, moradaFarmaciaEmissora, shortPath)
            activate GRAFO
            deactivate GRAFO

            TASK -> GRAFO : distancia += shortestPath(grafo, moradaFarmaciaEmissora, moradaFarmaciaRecetora, shortPath)
            activate GRAFO
            deactivate GRAFO

            note over TASK
                Todas as farmácias à estrutura
                "farmacias" (distancia, idFarmacia)
            end note
        end opt

    end loop

    note over TASK
        Vai ordenar a farmácia pelo menor consumo
        e retirao id da farmacia que estiver em
        primeiro lugar (menor distância)
    end note

    TASK -> NOTA : gerarNotas(idFarmaciaRecetora, idFarmaciaEmissora, idProduto, quantidadeNecessaria)
    activate NOTA

        NOTA -> BD : connection = getConnection()
        activate BD
        deactivate BD

        NOTA -> BD : closeConnection()
        activate BD
        deactivate BD

    deactivate NOTA

deactivate TASK

@enduml

PlantUML version 1.2020.23(Sun Dec 13 19:14:58 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>